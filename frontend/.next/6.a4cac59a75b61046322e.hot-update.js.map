{"version":3,"file":"6.a4cac59a75b61046322e.hot-update.js","sources":["webpack:///components/DeleteItem.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport { ALL_ITEMS_QUERY } from './Items';\n\nconst DELETE_ITEM_MUTATION = gql`\n\tmutation DELETE_ITEM_MUTATION($id: ID!) {\n\t\tdeleteItem(id: $id) {\n\t\t\tid\n\t\t}\n\t}\n`;\n\nclass DeleteItem extends Component {\n\tupdate = (cache, payload) => {\n\t\t// manually update the cache on the client so it matches the server\n\t\t// 1. Read the cache for the items we want\n\t\tconst data = cache.readQuery({ query: ALL_ITEMS_QUERY });\n\t\tconsole.log(data);\n\t\t// 2. Filter the deleted item out of the page\n\t\tdata.items = data.items.filter((item) => item.id !== payload.data.deleteItem.id);\n\t};\n\trender() {\n\t\treturn (\n\t\t\t<Mutation\n\t\t\t\tmutation={DELETE_ITEM_MUTATION}\n\t\t\t\tvariables={{\n\t\t\t\t\tid: this.props.id\n\t\t\t\t}}\n\t\t\t\tupdate={this.update}\n\t\t\t>\n\t\t\t\t{(deleteItem, { error }) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (confirm('Are you sure want to do delete?')) {\n\t\t\t\t\t\t\t\tdeleteItem();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</Mutation>\n\t\t);\n\t}\n}\n\nexport default DeleteItem;\n\n\n\n// WEBPACK FOOTER //\n// components/DeleteItem.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAOA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AADA;AAGA;AALA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AADA;AAaA;;;;AA/BA;AACA;AAiCA;;;;A","sourceRoot":""}